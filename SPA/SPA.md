
### 什么是单页应用

只有一张Web页面的应用,浏览器一开始加载必需的HTML && CSS && JS，之后的操作都通过JS在这张页面完成；

因此，SPA会包含大量JS代码，使用模块化开发成为标配；

- 在浏览器运行的应用，在使用期间不会重新加载页面；
- 从Web服务器加载的富客户端；

### SPA的特点

- 桌面应用的即时性
	- SPA只需要重绘界面上需要变化的部分，传统网页是根据请求重绘整张页面；

	- SPA将数据和业务逻辑从服务端移到浏览器端，多数操作在客户端就可完成，只有数据验证、授权和持久存储等必要逻辑放在服务端；
	  传统网站将多数业务逻辑房子啊服务端，在处理io操作时耗时更高

- 网站的可移植性和可访问性
	- SPA不像桌面引用，可以直接通过网络和浏览器访问
	- SPA可以及时更新和发布，桌面应用经常需要下载并安装新版本
	- SPA是跨平台的，直接在现代浏览器和多终端中运行

### 关注点

- 前端
	- 路由控制

		SPA基于hash fragments的URL进行路由控制，每个路由规则绑定相应页面视图，根据路由变化自动切换视图；

		hash路由设计成基于字符串片段的规则，每个片段用`/`分隔；

		片段可包含`:`为前缀的参数，`*`为前缀的参数匹配任意数量的片段，（:optional）为可选片段，还可以使用正则表达式片段；

		URL解析后，将请求参数数组requestData存储到对应页面视图对象中，提供给负责特定路由下的视图渲染回调函数处理；

	- 视图切换
		SPA提供两类视图，页面视图和面板视图，不同视图之间通过设定的动画进行切换
		设计视图切换效果
		- 页面视图
			页面视图模拟<body>并覆盖整个视图区域，页面视图的DOM结构
			```
				<!--页面视图的DOM结构-->
				<div class="spa-page spa-page-customclassname">
				  <div class="spa-page-body">
				    <!--视图内容会被渲染到这里-->
				  </div>
				</div>
			```
		- 面板视图
			面板视图不需要绑定路由规则，即没有对应的路由请求，需要在javascript中主动打开，面板视图可以用来做侧边栏菜单、对话框等应用组件；
			面板视图的容器结构是在页面视图容器结构的基础上进行扩展；
- 后端
	- 异步数据接口

### 基本原理

用户点击链接、浏览器后退按钮或是url hash进行路由请求，解析路由规则，发送视图对象数据，返回对应页面视图（面板视图）并进行初始化，通过对应切换动画切换视图；